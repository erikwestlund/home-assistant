- id: "turn_off_dining_room_heat_pump"
  alias: "Turn Off Dining Room Heat Pump"
  trigger:
    - platform: state
      entity_id: binary_sensor.dining_room_heat_pump_power_on_status
      to: "off"
  condition:
    - condition: template
      value_template: >
        {{ not is_state('climate.dining_room_heat_pump', 'off') }}
  action:
    - service: climate.turn_off
      target:
        entity_id: climate.dining_room_heat_pump

- id: "turn_on_dining_room_heat_pump"
  alias: "Turn On Dining Room Heat Pump"
  trigger:
    - platform: state
      entity_id: binary_sensor.dining_room_heat_pump_power_on_status
      to: "on"
  condition:
    - condition: template
      value_template: >
        {{ is_state('climate.dining_room_heat_pump', 'off') }}
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_select.hvac_mode
              state: "Heat"
          sequence:
            - service: climate.set_hvac_mode
              data:
                entity_id: climate.dining_room_heat_pump
                hvac_mode: heat
        - conditions:
            - condition: state
              entity_id: input_select.hvac_mode
              state: "Cool"
          sequence:
            - service: climate.set_hvac_mode
              data:
                entity_id: climate.dining_room_heat_pump
                hvac_mode: cool