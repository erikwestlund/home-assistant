#- id: "set_erik_office_mini_split_setpoint"
#  alias: "Set Erik Office Mini Split Setpoint"
#  trigger:
#    - platform: state
#      entity_id: sensor.erik_office_mini_split_setpoint_target_temperature
#  condition:
#    - condition: template
#      value_template: >
#        {{ states('climate.eriks_office_room') != 'off' }}
#    - condition: template
#      value_template: >
#        {{ states('sensor.erik_office_mini_split_setpoint_target_temperature') | float(0) != state_attr('climate.eriks_office_room', 'temperature') | float(0) }}
#  action:
#    - choose:
#        # Turn on the unit if it's off
#        - conditions:
#            - condition: template
#              value_template: >
#                {{ is_state('climate.eriks_office_room', 'off') }}
#          sequence:
#            - service: climate.set_hvac_mode
#              data:
#                entity_id: climate.eriks_office_room
#                hvac_mode: >
#                  {% if is_state('input_select.hvac_mode', 'Heat') %}
#                    heat
#                  {% else %}
#                    cool
#                  {% endif %}
#            - service: logbook.log
#              data:
#                name: "Erik Office Mini Split Automation"
#                message: >
#                  Erik Office Mini Split was off. Turned on with HVAC mode {{ states('input_select.hvac_mode') }}.
#
#        # Update the temperature if it differs from the current setpoint
#        - conditions:
#            - condition: template
#              value_template: >
#                {{ states('sensor.erik_office_mini_split_setpoint_target_temperature') | float(0) != state_attr('climate.eriks_office_room', 'temperature') | float(0) }}
#          sequence:
#            - service: logbook.log
#              data:
#                name: "Erik Office Mini Split Automation"
#                message: >
#                  Updating Erik Office Mini Split target temperature.
#                  Target temperature: {{ states('sensor.erik_office_mini_split_setpoint_target_temperature') }}°F.
#                  Current thermostat temperature: {{ state_attr('climate.eriks_office_room', 'temperature') }}°F.
#            - service: climate.set_temperature
#              data:
#                entity_id: climate.eriks_office_room
#                temperature: "{{ states('sensor.erik_office_mini_split_setpoint_target_temperature') | float(0) }}"
#  mode: single