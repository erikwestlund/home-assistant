- id: "sync_all_setpoints"
  alias: "Sync All Setpoints"
  trigger:
    - platform: time_pattern
      minutes: "/5"
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.tinas_office_heat_pump
        temperature: "{{ states('sensor.office_mini_split_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.office_mini_split_setpoint_target_temperature') != "None" and
           state_attr('climate.tinas_office_heat_pump', 'temperature') | float(0) !=
           states('sensor.office_mini_split_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.office
        temperature: "{{ states('sensor.office_radiator_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.office_radiator_setpoint_target_temperature') != "None" and
           state_attr('climate.office', 'temperature') | float(0) !=
           states('sensor.office_radiator_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.family_room_heat_pump
        temperature: "{{ states('sensor.family_room_mini_split_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.family_room_mini_split_setpoint_target_temperature') != "None" and
           state_attr('climate.family_room_heat_pump', 'temperature') | float(0) !=
           states('sensor.family_room_mini_split_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.family_room_heating
        temperature: "{{ states('sensor.family_room_radiator_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.family_room_radiator_setpoint_target_temperature') != "None" and
           state_attr('climate.family_room_heating', 'temperature') | float(0) !=
           states('sensor.family_room_radiator_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.living_room_heat_pump
        temperature: "{{ states('sensor.living_room_mini_split_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.living_room_mini_split_setpoint_target_temperature') != "None" and
           state_attr('climate.living_room_heat_pump', 'temperature') | float(0) !=
           states('sensor.living_room_mini_split_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room_heat_pump
        temperature: "{{ states('sensor.dining_room_mini_split_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.dining_room_mini_split_setpoint_target_temperature') != "None" and
           state_attr('climate.dining_room_heat_pump', 'temperature') | float(0) !=
           states('sensor.dining_room_mini_split_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.eriks_office_room
        temperature: "{{ states('sensor.erik_office_mini_split_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.erik_office_mini_split_setpoint_target_temperature') != "None" and
           state_attr('climate.eriks_office_room', 'temperature') | float(0) !=
           states('sensor.erik_office_mini_split_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.master_bedroom_heat_pump
        temperature: "{{ states('sensor.master_bedroom_mini_split_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.master_bedroom_mini_split_setpoint_target_temperature') != "None" and
           state_attr('climate.master_bedroom_heat_pump', 'temperature') | float(0) !=
           states('sensor.master_bedroom_mini_split_setpoint_target_temperature') | float(0) }}

    - service: climate.set_temperature
      data:
        entity_id: climate.ducted_heat_pump
        temperature: "{{ states('sensor.ducted_system_setpoint_target_temperature') | float(0) }}"
      enabled: >
        {{ states('sensor.ducted_system_setpoint_target_temperature') != "None" and
           state_attr('climate.ducted_heat_pump', 'temperature') | float(0) !=
           states('sensor.ducted_system_setpoint_target_temperature') | float(0) }}