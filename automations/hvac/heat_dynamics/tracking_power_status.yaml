## Radiators
# Office Radiator Power Status 60m Ago (Every Hour)
- id: update_radiator_power_status_office_60m_ago
  alias: "Update Radiator Power Status Office 60m Ago"
  trigger:
    - platform: template
      value_template: >
        {{ now().minute == states('input_number.store_minute_office') | int }}
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_radiator_power_status_office
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.radiator_power_status_office_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_radiator_power_status_office
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.radiator_power_status_office_60m_ago

# Family Room Radiator Power Status 60m Ago (Every Hour)
- id: update_radiator_power_status_family_room_60m_ago
  alias: "Update Radiator Power Status Family Room 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '3'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_radiator_power_status_family_room
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.radiator_power_status_family_room_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_radiator_power_status_family_room
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.radiator_power_status_family_room_60m_ago

# Main Zone Radiator Power Status 60m Ago (Every Hour)
- id: update_radiator_power_status_main_zone_60m_ago
  alias: "Update Radiator Power Status Main Zone 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '10'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_radiator_power_status_main_zone
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.radiator_power_status_main_zone_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_radiator_power_status_main_zone
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.radiator_power_status_main_zone_60m_ago

## Mini Spilts
## Mini Splits
# Office Mini Split Power Status 60m Ago (Every Hour)
- id: update_mini_split_power_status_office_60m_ago
  alias: "Update Mini Split Power Status Office 60m Ago"
  trigger:
    - platform: template
      value_template: >
        {{ now().minute == states('input_number.store_minute_office') | int }}
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_office
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mini_split_power_status_office_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_office
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.mini_split_power_status_office_60m_ago

# Family Room Mini Split Power Status 60m Ago (Every Hour)
- id: update_mini_split_power_status_family_room_60m_ago
  alias: "Update Mini Split Power Status Family Room 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '3'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_family_room
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mini_split_power_status_family_room_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_family_room
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.mini_split_power_status_family_room_60m_ago


# Living Room Mini Split Power Status 60m Ago (Every Hour)
- id: update_mini_split_power_status_living_room_60m_ago
  alias: "Update Mini Split Power Status Living Room 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '4'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_living_room
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mini_split_power_status_living_room_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_living_room
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.mini_split_power_status_living_room_60m_ago

# Dining Room Mini Split Power Status 60m Ago (Every Hour)
- id: update_mini_split_power_status_dining_room_60m_ago
  alias: "Update Mini Split Power Status Dining Room 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '5'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_dining_room
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mini_split_power_status_dining_room_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_dining_room
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.mini_split_power_status_dining_room_60m_ago

# Erik Office Mini Split Power Status 60m Ago (Every Hour)
- id: update_mini_split_power_status_erik_office_60m_ago
  alias: "Update Mini Split Power Status Erik Office 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '6'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_erik_office
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mini_split_power_status_erik_office_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_erik_office
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.mini_split_power_status_erik_office_60m_ago

# Master Bedroom Mini Split Power Status 60m Ago (Every Hour)
- id: update_mini_split_power_status_master_bedroom_60m_ago
  alias: "Update Mini Split Power Status Master Bedroom 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '7'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_master_bedroom
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mini_split_power_status_master_bedroom_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_mini_split_power_status_master_bedroom
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.mini_split_power_status_master_bedroom_60m_ago

## Ducted
# Ducted Power Status 60m Ago (Every Hour)
- id: update_ducted_power_status_60m_ago
  alias: "Update Ducted Power Status 60m Ago"
  trigger:
    platform: time_pattern
    minutes: '8'
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_ducted_power_status
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.ducted_power_status_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_ducted_power_status
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.ducted_power_status_60m_ago

## Space Heaters
# Office Space Heater Power Status 60m Ago (Every Hour)
- id: update_space_heater_power_status_office_60m_ago
  alias: "Update Space Heater Power Status Office 60m Ago"
  trigger:
    - platform: template
      value_template: >
        {{ now().minute == states('input_number.store_minute_office') | int }}
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_space_heater_active_office
              state: "on"
          sequence:
            - service: input_boolean.turn_on
              target:
                entity_id: input_boolean.space_heater_power_status_office_60m_ago
        - conditions:
            - condition: state
              entity_id: binary_sensor.hvac_space_heater_active_office
              state: "off"
          sequence:
            - service: input_boolean.turn_off
              target:
                entity_id: input_boolean.space_heater_power_status_office_60m_ago
