- name: "Ducted Heat Pump Setpoint"
  unique_id: ducted_heatpump_setpoint
  state: >
    {% if is_state('input_boolean.ducted_override_status', 'on') %}
      Override
    {% elif is_state('binary_sensor.ducted_heat_pump_power_on_status', 'off') %}
      Off
    {% else %}
      {% set time_period = states('sensor.ducted_time_period') %}
      {% if time_period == 'Daytime' and is_state('binary_sensor.kids_rooms_need_heat', 'on') %}
        Heating Kids Room Daytime
      {% elif time_period == 'Daytime' and is_state('binary_sensor.stairwell_needs_heat', 'on') %}
        Heating Stairwell Daytime
      {% elif time_period == 'Bedtime' and is_state('binary_sensor.kids_rooms_need_heat', 'on') %}
        Heating Kids Room Bedtime
      {% elif time_period == 'Bedtime' and is_state('binary_sensor.stairwell_needs_heat', 'on') %}
        Heating Stairwell Bedtime
      {% elif time_period == 'Sleep' and is_state('binary_sensor.kids_rooms_need_heat', 'on') %}
        Heating Kids Room Sleep
      {% elif time_period == 'Sleep' and is_state('binary_sensor.stairwell_needs_heat', 'on') %}
        Heating Stairwell Sleep
      {% else %}
        Default
      {% endif %}
    {% endif %}
  icon: >-
    {% set state = states('sensor.ducted_heatpump_setpoint') %}
    {% if state == "Override" %}
      mdi:alert
    {% elif state == "Off" %}
      mdi:power
    {% elif "Kids Room" in state %}
      mdi:home-thermometer-outline
    {% elif "Stairwell" in state %}
      mdi:stairs
    {% elif state == "Idle" %}
      mdi:power-sleep
    {% else %}
      mdi:thermometer
    {% endif %}
    

- name: "Ducted System Setpoint Target Temperature"
  unique_id: ducted_setpoint_target_temperature
  state: >
    {% set setpoint = states('sensor.ducted_heat_pump_setpoint') %}
    {% if setpoint == "Off" %}
      None
    {% elif setpoint == "Idle" %}
      None
    {% elif setpoint == "Default" %}
      {{ states('input_number.ducted_heatpump_default_temp') }}
    {% elif setpoint == "Heating Kids Room Daytime" %}
      {{ states('input_number.ducted_heatpump_kids_rooms_daytime_target') }}
    {% elif setpoint == "Heating Kids Room Bedtime" %}
      {{ states('input_number.ducted_heatpump_kids_rooms_bedtime_target') }}
    {% elif setpoint == "Heating Kids Room Sleep" %}
      {{ states('input_number.ducted_heatpump_kids_rooms_sleep_target') }}
    {% elif setpoint == "Heating Stairwell Daytime" %}
      {{ states('input_number.ducted_heatpump_stairwell_daytime_target') }}
    {% elif setpoint == "Heating Stairwell Bedtime" %}
      {{ states('input_number.ducted_heatpump_stairwell_bedtime_target') }}
    {% elif setpoint == "Heating Stairwell Sleep" %}
      {{ states('input_number.ducted_heatpump_stairwell_sleep_target') }}
    {% elif setpoint == "Override" %}
      {{ states('input_number.ducted_override_setpoint') }}
    {% else %}
      {{ states('input_number.ducted_heatpump_default_temp') }}
    {% endif %}
  unit_of_measurement: "Â°F"
  icon: >-
    {% set setpoint = states('sensor.ducted_system_setpoint') %}
    {% if setpoint == "Off" %}
      mdi:power
    {% elif setpoint == "Idle" %}
      mdi:sleep
    {% elif "Kids Room" in setpoint %}
      mdi:bed
    {% elif "Stairwell" in setpoint %}
      mdi:stairs
    {% elif setpoint == "Override" %}
      mdi:alert
    {% else %}
      mdi:thermometer
    {% endif %}
    
