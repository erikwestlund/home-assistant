- name: "HVAC Mini Split Setpoint Family Room"
  unique_id: hvac_mini_split_setpoint_family_room
  state: >
    {% set is_power_off = is_state('binary_sensor.hvac_mini_split_power_status_family_room', 'off') %}
    {% set is_override = is_state('input_boolean.hvac_override_status_family_room', 'on') %}
    {% set is_away_mode = is_state('input_boolean.hvac_away_mode', 'on') %}
    {% set comfort_mode = states('sensor.hvac_mini_split_comfort_setting_mode_family_room') %}
    
    {# If Power is Off, return None #}
    {% if is_power_off %}
      None
    {# If Override is Active, use Override Setpoint #}
    {% elif is_override %}
      {{ states('input_number.hvac_mini_split_override_setpoint_family_room') }}
    {# If Away Mode is Active, use Away Setpoint #}
    {% elif is_away_mode %}
      {{ states('input_number.hvac_mini_split_away_setpoint_family_room') }}
    {# Comfort Mode Based Logic #}
    {% elif comfort_mode == "Freezing" %}
      {% if is_state('sensor.hvac_comfort_setting_family_room', 'Weekday Daytime') %}
        {{ states('input_number.hvac_mini_split_weekday_day_freezing_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekday Nighttime') %}
        {{ states('input_number.hvac_mini_split_weekday_night_freezing_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekend Daytime') %}
        {{ states('input_number.hvac_mini_split_weekend_day_freezing_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekend Nighttime') %}
        {{ states('input_number.hvac_mini_split_weekend_night_freezing_setpoint_family_room') }}
      {% else %}
        None
      {% endif %}
    {% elif comfort_mode == "Cold" %}
      {% if is_state('sensor.hvac_comfort_setting_family_room', 'Weekday Daytime') %}
        {{ states('input_number.hvac_mini_split_weekday_day_cold_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekday Nighttime') %}
        {{ states('input_number.hvac_mini_split_weekday_night_cold_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekend Daytime') %}
        {{ states('input_number.hvac_mini_split_weekend_day_cold_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekend Nighttime') %}
        {{ states('input_number.hvac_mini_split_weekend_night_cold_setpoint_family_room') }}
      {% else %}
        None
      {% endif %}
    {% elif comfort_mode == "Hot" %}
      {% if is_state('sensor.hvac_comfort_setting_family_room', 'Weekday Daytime') %}
        {{ states('input_number.hvac_mini_split_weekday_day_hot_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekday Nighttime') %}
        {{ states('input_number.hvac_mini_split_weekday_night_hot_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekend Daytime') %}
        {{ states('input_number.hvac_mini_split_weekend_day_hot_setpoint_family_room') }}
      {% elif is_state('sensor.hvac_comfort_setting_family_room', 'Weekend Nighttime') %}
        {{ states('input_number.hvac_mini_split_weekend_night_hot_setpoint_family_room') }}
      {% else %}
        None
      {% endif %}
    {% else %}
      None
    {% endif %}
  icon: mdi:thermometer