- name: "HVAC Erik Office Mini Split Setpoint"
  unique_id: hvac_erik_office_mini_split_setpoint
  state: >
    {% set is_power_off = is_state('binary_sensor.hvac_mini_split_power_status_erik_office', 'off') %}
    {% set is_override = is_state('input_boolean.hvac_override_status_erik_office', 'on') %}
    {% set is_away_mode = is_state('input_boolean.hvac_away_mode', 'on') %}
    {% set comfort_mode = states('sensor.hvac_mini_split_comfort_setting_mode_erik_office') %}
    
    {# If Power is Off, return None #}
    {% if is_power_off %}
      None
    {# If Override is Active, use Override Setpoint #}
    {% elif is_override %}
      {{ states('input_number.hvac_mini_split_override_setpoint_erik_office') }}
    {# If Away Mode is Active, use Away Setpoint #}
    {% elif is_away_mode %}
      {{ states('input_number.hvac_mini_split_away_setpoint_erik_office') }}
    {# Comfort Mode Based Logic #}
    {% elif comfort_mode == "Freezing" %}
      {% if is_state('sensor.hvac_comfort_setting_erik_office', 'Weekday Occupied') %}
        {{ states('input_number.hvac_mini_split_weekday_occupied_freezing_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Weekday Unoccupied') %}
        {{ states('input_number.hvac_mini_split_weekday_unoccupied_freezing_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Weekend') %}
        {{ states('input_number.hvac_mini_split_weekend_freezing_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Night') %}
        {{ states('input_number.hvac_mini_split_night_freezing_setpoint_erik_office') }}
      {% else %}
        None
      {% endif %}
    {% elif comfort_mode == "Cold" %}
      {% if is_state('sensor.hvac_comfort_setting_erik_office', 'Weekday Occupied') %}
        {{ states('input_number.hvac_mini_split_weekday_occupied_cold_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Weekday Unoccupied') %}
        {{ states('input_number.hvac_mini_split_weekday_unoccupied_cold_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Weekend') %}
        {{ states('input_number.hvac_mini_split_weekend_cold_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Night') %}
        {{ states('input_number.hvac_mini_split_night_cold_setpoint_erik_office') }}
      {% else %}
        None
      {% endif %}
    {% elif comfort_mode == "Hot" %}
      {% if is_state('sensor.hvac_comfort_setting_erik_office', 'Weekday Occupied') %}
        {{ states('input_number.hvac_mini_split_weekday_occupied_hot_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Weekday Unoccupied') %}
        {{ states('input_number.hvac_mini_split_weekday_unoccupied_hot_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Weekend') %}
        {{ states('input_number.hvac_mini_split_weekend_hot_setpoint_erik_office') }}
      {% elif is_state('sensor.hvac_comfort_setting_erik_office', 'Night') %}
        {{ states('input_number.hvac_mini_split_night_hot_setpoint_erik_office') }}
      {% else %}
        None
      {% endif %}
    {% else %}
      None
    {% endif %}
  icon: mdi:thermometer